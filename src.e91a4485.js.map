{"version":3,"sources":["js/services/eventsAPI.js","js/events.js","index.js"],"names":["API_KEY","BASE_URL","fetchEvents","page","params","URLSearchParams","apikey","fetch","then","r","ok","json","Promise","reject","statusText","refs","events","document","querySelector","prevBtn","nextBtn","linkList","listFirstPage","totalPages","handleSuccess","res","_embedded","renderList","markup","map","createMarkup","join","insertAdjacentHTML","name","images","dates","url","imageUrl","find","ratio","width","Date","start","localDate","toLocaleDateString","localTime","handleError","err","console","error","onPrevBtnClick","disabled","linksRef","querySelectorAll","length","createList","changeLinksText","onNextBtnClick","lastPage","pages","num","forEach","link","index","textContent","first","last","innerHTML","i","createLinkMarkup","catch","addEventListener"],"mappings":";;;AAYC,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,YAAA,EAZD,MAAMA,EAAU,mCACVC,EAAW,6CAEjB,SAASC,EAAYC,EAAO,GACpBC,MAAAA,EAAS,IAAIC,gBAAgB,CACjCC,OAAQN,EACRG,KAAAA,IAEKI,OAAAA,SAASN,iBAAwBG,qBAA0BI,KAAKC,GACrEA,EAAEC,GAAKD,EAAEE,OAASC,QAAQC,OAAOJ,EAAEK;;ACuFtC,aAhGD,IAAA,EAAA,QAAA,wBACA,MAAMC,EAAO,CACXC,OAAQC,SAASC,cAAc,WAC/BC,QAASF,SAASC,cAAc,qBAChCE,QAASH,SAASC,cAAc,qBAChCG,SAAUJ,SAASC,cAAc,eAGnC,IAAII,EAAgB,EAChBC,EAAa,KAMjB,SAASC,EAAcC,GAAK,IAAA,EAAA,EACpBT,MAAAA,EAAS,QAAAS,EAAAA,EAAIC,iBAAJ,IAAA,OAAA,EAAA,EAAeV,OAC9BO,EAAa,QAAAE,EAAAA,EAAItB,YAAJ,IAAA,OAAA,EAAA,EAAUoB,WACvBI,EAAWX,GAEb,SAASW,EAAWX,EAAS,IACrBY,MAAAA,EAASZ,EAAOa,IAAIC,GAAcC,KAAK,IAC7ChB,EAAKC,OAAOgB,mBAAmB,YAAaJ,GAE9C,SAASE,GAAa,KAAEG,EAAF,OAAQC,EAAS,GAAjB,MAAqBC,EAArB,IAA4BC,IAAO,IAAA,EAAA,EACjD,MAAEA,IAAKC,GAAaH,EAAOI,KAAK,EAAGC,MAAAA,EAAOC,MAAAA,KAAsB,QAAVD,GAA6B,MAAVC,GACvE,uDAEKJ,sBACCC,WAAkBJ,wCAEzBA,iBACA,IAAIQ,KAAKN,MAAAA,OAAAA,EAAA,QAAAA,EAAAA,EAAOO,aAAP,IAAA,OAAA,EAAA,EAAcC,WAAWC,wBAAwBT,MAAAA,OAAAA,EAAA,QAAAA,EAAAA,EAAOO,aAAP,IAAA,OAAA,EAAA,EAAcG,uDAOjF,SAASC,EAAYC,GACnBC,QAAQC,MAAMF,GAGhB,SAASG,IACH5B,GAAAA,GAAiB,EAAG,OAExBP,EAAKK,QAAQ+B,UAAW,EAClBC,MAAAA,EAAWnC,SAASoC,iBAAiB,oBAEvCD,EAASE,OAAS,EACpBC,EAAWjC,EAAeA,EAAgB,IAI5CkC,GAAiB,EAAGJ,GACE,IAAlB9B,IACFP,EAAKI,QAAQgC,UAAW,IAG5B,SAASM,IACHnC,GAAAA,EAAgBC,EAAY,OAEhCR,EAAKI,QAAQgC,UAAW,EAClBC,MAAAA,EAAWnC,SAASoC,iBAAiB,oBACrCK,EAAWpC,EAAgB,EAG7BqC,GAFUpC,EAAamC,EAEf,EAGV,OAFAH,EAAWG,EAAW,EAAGnC,EAAa,QACtCR,EAAKK,QAAQ+B,UAAW,GAI1BK,EAAgB,EAAGJ,GAGrB,SAASI,EAAgBI,EAAK7C,GAC5BO,GAAiBsC,EACjB7C,EAAK8C,QAAQ,CAACC,EAAMC,IAAWD,EAAKE,YAAc1C,EAAgByC,GAGpE,SAASR,EAAWU,EAAOC,GACzBnD,EAAKM,SAAS8C,UAAY,GACtBvC,IAAAA,EAAS,GACR,IAAA,IAAIwC,EAAIH,EAAOG,EAAIF,EAAME,GAAK,EACjCxC,GAAUyC,EAAiBD,GAE7BrD,EAAKM,SAASW,mBAAmB,YAAaJ,GAGhD,SAASyC,EAAiBT,GAChB,2EAEsBA,0BAlFhC,EAAcpD,EAAAA,eAAAA,KAAKgB,GAAe8C,MAAMxB,GACxC/B,EAAKI,QAAQoD,iBAAiB,QAASrB,GACvCnC,EAAKK,QAAQmD,iBAAiB,QAASd;;ACUvC,aAvBA,QAAA,oBAuBA,QAAA","file":"src.e91a4485.js","sourceRoot":"../src","sourcesContent":["const API_KEY = '9cTjAjlRB53wyhAFk5VzXcBu5GiPU6fK';\nconst BASE_URL = 'https://app.ticketmaster.com/discovery/v2/';\n\nfunction fetchEvents(page = 1) {\n  const params = new URLSearchParams({\n    apikey: API_KEY,\n    page,\n  });\n  return fetch(`${BASE_URL}/events.json?${params}&keyword=beatles`).then(r =>\n    r.ok ? r.json() : Promise.reject(r.statusText),\n  );\n  // .then(r => r._embedded?.events);\n}\nexport { fetchEvents };\n","import { fetchEvents } from './services/eventsAPI';\nconst refs = {\n  events: document.querySelector('.events'),\n  prevBtn: document.querySelector(\"[data-btn='prev']\"),\n  nextBtn: document.querySelector(\"[data-btn='next']\"),\n  linkList: document.querySelector('.link-list'),\n};\n\nlet listFirstPage = 1;\nlet totalPages = null;\n\nfetchEvents().then(handleSuccess).catch(handleError);\nrefs.prevBtn.addEventListener('click', onPrevBtnClick);\nrefs.nextBtn.addEventListener('click', onNextBtnClick);\n\nfunction handleSuccess(res) {\n  const events = res._embedded?.events;\n  totalPages = res.page?.totalPages;\n  renderList(events);\n}\nfunction renderList(events = []) {\n  const markup = events.map(createMarkup).join('');\n  refs.events.insertAdjacentHTML('beforeend', markup);\n}\nfunction createMarkup({ name, images = [], dates, url }) {\n  const { url: imageUrl } = images.find(({ ratio, width }) => ratio === '3_2' && width === 305);\n  return `\n    <li class=\"events__item\">\n    <a href=\"${url}\">\n    <img src=\"${imageUrl}\" alt=\"${name}\" width=\"300\" />\n    <div>\n    <p>${name}</p>\n    <p>${new Date(dates?.start?.localDate).toLocaleDateString()} ${dates?.start?.localTime}</p>\n    </div>\n    </a>\n    </li>\n    `;\n}\n\nfunction handleError(err) {\n  console.error(err);\n}\n\nfunction onPrevBtnClick() {\n  if (listFirstPage <= 1) return;\n\n  refs.nextBtn.disabled = false;\n  const linksRef = document.querySelectorAll('.link-list .link');\n\n  if (linksRef.length < 5) {\n    createList(listFirstPage, listFirstPage + 5);\n    return;\n  }\n\n  changeLinksText(-5, linksRef);\n  if (listFirstPage === 1) {\n    refs.prevBtn.disabled = true;\n  }\n}\nfunction onNextBtnClick() {\n  if (listFirstPage > totalPages) return;\n\n  refs.prevBtn.disabled = false;\n  const linksRef = document.querySelectorAll('.link-list .link');\n  const lastPage = listFirstPage + 4;\n  const pages = totalPages - lastPage;\n\n  if (pages < 5) {\n    createList(lastPage + 1, totalPages + 1);\n    refs.nextBtn.disabled = true;\n    return;\n  }\n\n  changeLinksText(5, linksRef);\n}\n\nfunction changeLinksText(num, refs) {\n  listFirstPage += num;\n  refs.forEach((link, index) => (link.textContent = listFirstPage + index));\n}\n\nfunction createList(first, last) {\n  refs.linkList.innerHTML = '';\n  let markup = '';\n  for (let i = first; i < last; i += 1) {\n    markup += createLinkMarkup(i);\n  }\n  refs.linkList.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction createLinkMarkup(num) {\n  return `\n    <li class=\"link-list__item\">\n      <a class=\"link\" href=\"\">${num}</a>\n    </li>\n    `;\n}\n","import './sass/main.scss';\n// import './js/practice1';\n// game\n// import './js/practice2';\n// game\n// import './js/practice3';\n// import './js/practice4';\n// import './js/practice5';\n// import './js/practice6';\n// import './js/practice7';\n// import './js/practice8';\n// import './js/lection8-add';\n// import './js/practice8-add';\n// import './js/practice9';\n// import './js/practice10';\n// import './js/practice11';\n// import './js/app';\n// import './js/practice17-timer';\n// import './js/practice17';\n// import './js/practice18';\n// import './js/movies';\n// import './js/food-service';\n// import './js/practice-assign';\nimport './js/events';\n"]}