{"version":3,"sources":["js/services/eventsAPI.js","js/events.js","index.js"],"names":["API_KEY","BASE_URL","fetchEvents","page","params","URLSearchParams","apikey","fetch","then","r","ok","json","Promise","reject","statusText","refs","events","document","querySelector","prevBtn","nextBtn","linkList","totalPages","handleSuccess","res","_embedded","renderList","markup","map","createMarkup","join","insertAdjacentHTML","name","images","url","handleError","err","console","error","onPrevBtnClick","disabled","linksRef","querySelectorAll","prevPage","Number","textContent","length","createList","changeLinksText","onNextBtnClick","lastPage","pages","innerHTML","i","createLinksMarkup","num","forEach","link","catch","addEventListener"],"mappings":";;;AAYC,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,YAAA,EAZD,MAAMA,EAAU,mCACVC,EAAW,6CAEjB,SAASC,EAAYC,EAAO,GACpBC,MAAAA,EAAS,IAAIC,gBAAgB,CACjCC,OAAQN,EACRG,KAAAA,IAEKI,OAAAA,SAASN,iBAAwBG,qBAA0BI,KAAKC,GACrEA,EAAEC,GAAKD,EAAEE,OAASC,QAAQC,OAAOJ,EAAEK;;AC8EtC,aAvFD,IAAA,EAAA,QAAA,wBACA,MAAMC,EAAO,CACXC,OAAQC,SAASC,cAAc,WAC/BC,QAASF,SAASC,cAAc,qBAChCE,QAASH,SAASC,cAAc,qBAChCG,SAAUJ,SAASC,cAAc,eAGnC,IAAII,EAAa,KAMjB,SAASC,EAAcC,GAAK,IAAA,EAAA,EACpBR,MAAAA,EAAS,QAAAQ,EAAAA,EAAIC,iBAAJ,IAAA,OAAA,EAAA,EAAeT,OAC9BM,EAAa,QAAAE,EAAAA,EAAIrB,YAAJ,IAAA,OAAA,EAAA,EAAUmB,WACvBI,EAAWV,GAEb,SAASU,EAAWV,EAAS,IACrBW,MAAAA,EAASX,EAAOY,IAAIC,GAAcC,KAAK,IAC7Cf,EAAKC,OAAOe,mBAAmB,YAAaJ,GAE9C,SAASE,GAAa,KAAEG,EAAF,OAAQC,EAAS,KAAM,IAAA,EACnC,mCAEM,QAAAA,EAAAA,EAAO,UAAP,IAAA,OAAA,EAAA,EAAWC,aAAaF,oCACxBA,yBAKhB,SAASG,EAAYC,GACnBC,QAAQC,MAAMF,GAGhB,SAASG,IACPxB,EAAKK,QAAQoB,UAAW,EAElBC,MAAAA,EAAWxB,SAASyB,iBAAiB,oBACrCC,EAAWC,OAAOH,EAAS,GAAGI,aAChCJ,EAASK,OAAS,GACpBC,EAAWJ,GAGbK,GAAiB,EAAGP,GACY,MAA5BA,EAAS,GAAGI,cACd9B,EAAKI,QAAQqB,UAAW,GAG5B,SAASS,IACPlC,EAAKI,QAAQqB,UAAW,EAClBC,MAAAA,EAAWxB,SAASyB,iBAAiB,oBACrCQ,EAAWN,OAAOH,EAAS,GAAGI,aAEhCM,GADU7B,EAAa4B,EACf,EAAG,CACbnC,EAAKM,SAAS+B,UAAY,GACtBzB,IAAAA,EAAS,GACR,IAAA,IAAI0B,EAAIH,EAAW,EAAGG,GAAK/B,EAAY+B,GAAK,EAC/C1B,GAAU2B,EAAkBD,GAI9B,OAFAtC,EAAKM,SAASU,mBAAmB,YAAaJ,QAC9CZ,EAAKK,QAAQoB,UAAW,GAG1BQ,EAAgB,EAAGP,GAGrB,SAASO,EAAgBO,EAAKxC,GAC5BA,EAAKyC,QAAQC,GAASA,EAAKZ,YAAcD,OAAOa,EAAKZ,aAAeU,GAGtE,SAASR,EAAWJ,GAClB5B,EAAKM,SAAS+B,UAAY,GACtBzB,IAAAA,EAAS,GACR,IAAA,IAAI0B,EAAIV,EAAW,EAAGU,EAAIV,EAAUU,GAAK,EAC5C1B,GAAU2B,EAAkBD,GAE9BtC,EAAKM,SAASU,mBAAmB,YAAaJ,GAGhD,SAAS2B,EAAkBC,GACjB,2EAEsBA,0BA1EhC,EAAc/C,EAAAA,eAAAA,KAAKe,GAAemC,MAAMvB,GACxCpB,EAAKI,QAAQwC,iBAAiB,QAASpB,GACvCxB,EAAKK,QAAQuC,iBAAiB,QAASV;;ACWvC,aAvBA,QAAA,oBAuBA,QAAA","file":"src.68fc6deb.js","sourceRoot":"../src","sourcesContent":["const API_KEY = '9cTjAjlRB53wyhAFk5VzXcBu5GiPU6fK';\nconst BASE_URL = 'https://app.ticketmaster.com/discovery/v2/';\n\nfunction fetchEvents(page = 1) {\n  const params = new URLSearchParams({\n    apikey: API_KEY,\n    page,\n  });\n  return fetch(`${BASE_URL}/events.json?${params}&keyword=beatles`).then(r =>\n    r.ok ? r.json() : Promise.reject(r.statusText),\n  );\n  // .then(r => r._embedded?.events);\n}\nexport { fetchEvents };\n","import { fetchEvents } from './services/eventsAPI';\nconst refs = {\n  events: document.querySelector('.events'),\n  prevBtn: document.querySelector(\"[data-btn='prev']\"),\n  nextBtn: document.querySelector(\"[data-btn='next']\"),\n  linkList: document.querySelector('.link-list'),\n};\n// refs.links = refs.linkList.querySelectorAll('.link');\nlet totalPages = null;\n\nfetchEvents().then(handleSuccess).catch(handleError);\nrefs.prevBtn.addEventListener('click', onPrevBtnClick);\nrefs.nextBtn.addEventListener('click', onNextBtnClick);\n\nfunction handleSuccess(res) {\n  const events = res._embedded?.events;\n  totalPages = res.page?.totalPages;\n  renderList(events);\n}\nfunction renderList(events = []) {\n  const markup = events.map(createMarkup).join('');\n  refs.events.insertAdjacentHTML('beforeend', markup);\n}\nfunction createMarkup({ name, images = [] }) {\n  return `\n    <li>\n    <img src=\"${images[0]?.url}\" alt=\"${name}\" width=\"300\" />\n    <p>Title: ${name}</p>\n    </li>\n    `;\n}\n\nfunction handleError(err) {\n  console.error(err);\n}\n\nfunction onPrevBtnClick() {\n  refs.nextBtn.disabled = false;\n\n  const linksRef = document.querySelectorAll('.link-list .link');\n  const prevPage = Number(linksRef[0].textContent);\n  if (linksRef.length < 5) {\n    createList(prevPage);\n  }\n\n  changeLinksText(-5, linksRef);\n  if (linksRef[0].textContent === '1') {\n    refs.prevBtn.disabled = true;\n  }\n}\nfunction onNextBtnClick() {\n  refs.prevBtn.disabled = false;\n  const linksRef = document.querySelectorAll('.link-list .link');\n  const lastPage = Number(linksRef[4].textContent);\n  const pages = totalPages - lastPage;\n  if (pages < 5) {\n    refs.linkList.innerHTML = '';\n    let markup = '';\n    for (let i = lastPage + 1; i <= totalPages; i += 1) {\n      markup += createLinksMarkup(i);\n    }\n    refs.linkList.insertAdjacentHTML('beforeend', markup);\n    refs.nextBtn.disabled = true;\n    return;\n  }\n  changeLinksText(5, linksRef);\n}\n\nfunction changeLinksText(num, refs) {\n  refs.forEach(link => (link.textContent = Number(link.textContent) + num));\n}\n\nfunction createList(prevPage) {\n  refs.linkList.innerHTML = '';\n  let markup = '';\n  for (let i = prevPage - 5; i < prevPage; i += 1) {\n    markup += createLinksMarkup(i);\n  }\n  refs.linkList.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction createLinksMarkup(num) {\n  return `\n    <li class=\"link-list__item\">\n      <a class=\"link\" href=\"\">${num}</a>\n    </li>\n    `;\n}\n","import './sass/main.scss';\n// import './js/practice1';\n// game\n// import './js/practice2';\n// game\n// import './js/practice3';\n// import './js/practice4';\n// import './js/practice5';\n// import './js/practice6';\n// import './js/practice7';\n// import './js/practice8';\n// import './js/lection8-add';\n// import './js/practice8-add';\n// import './js/practice9';\n// import './js/practice10';\n// import './js/practice11';\n// import './js/app';\n// import './js/practice17-timer';\n// import './js/practice17';\n// import './js/practice18';\n// import './js/movies';\n// import './js/food-service';\n// import './js/practice-assign';\nimport './js/events';\n"]}