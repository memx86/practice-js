{"version":3,"sources":["js/services/moviesAPI.js","js/movies.js","index.js"],"names":["KEY","BASE_URL","SEARCH_MOVIES","MOVIE","TRENDING","COMMON","fetchUrl","url","fetch","then","r","ok","json","Promise","reject","getMovies","query","results","getMovie","id","getCast","cast","getReviews","getTrending","refs","movies","document","querySelector","backdrop","card","createMarkup","poster_path","title","name","vote_average","renderMovies","markup","map","join","innerHTML","onMovieClick","e","liRef","target","closest","dataset","renderMovieCard","classList","add","addEventListener","onEsc","movie","createMovieCardMarkup","popularity","vote_count","overview","key","remove","removeEventListener"],"mappings":";;;AAiCC,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,SAAA,EAAA,QAAA,UAAA,EAAA,QAAA,SAAA,EAAA,QAAA,QAAA,EAAA,QAAA,WAAA,EAAA,QAAA,YAAA,EAjCD,MAAMA,EAAM,mCACNC,EAAW,+BACXC,KAAmBD,iBACnBE,KAAWF,UACXG,KAAcH,aACdI,aAAoBL,mBAE1B,SAASM,EAASC,GACTC,OAAAA,MAAMD,GAAKE,KAAKC,GACjBA,EAAEC,GAAWD,EAAEE,OACZC,QAAQC,OAAOJ,IAG1B,SAASK,EAAUC,GAGVV,OAAAA,KADQJ,cADec,OACgBX,KACzBI,KAAKC,GAAKA,EAAEO,SAEnC,SAASC,EAASC,GAETb,OAAAA,KADQH,KAASgB,KAAMd,KAGhC,SAASe,EAAQD,GAERb,OAAAA,KADQH,KAASgB,aAAcd,KACjBI,KAAKC,GAAKA,EAAEW,MAEnC,SAASC,EAAWH,GAEXb,OAAAA,KADQH,KAASgB,aAAcd,KACjBI,KAAKC,GAAKA,EAAEO,SAEnC,SAASM,IAEAjB,OAAAA,KADQF,aAAoBC,KACdI,KAAKC,GAAKA,EAAEO;;ACgClC,aAhED,IAAA,EAAA,QAAA,wBAEA,MAAMO,EAAO,CACXC,OAAQC,SAASC,cAAc,WAC/BC,SAAUF,SAASC,cAAc,aACjCE,KAAMH,SAASC,cAAc,gBAK/B,SAASG,GAAa,GAAEX,EAAF,YAAMY,EAAN,MAAmBC,EAAnB,KAA0BC,EAA1B,aAAgCC,IAE5C,gDAC6Bf,4FACYY,WAAqBC,GAASC,4BAEvED,GAASC,+BACGC,GAAgB,mDAKtC,SAASC,EAAaV,GACdW,MAAAA,EAASX,EAAOY,IAAIP,GAAcQ,KAAK,IAC7Cd,EAAKC,OAAOc,UAAYH,EAG1B,SAASI,EAAaC,GACdC,MACAvB,EADQsB,EAAEE,OAAOC,QAAQ,MACdC,QAAQ1B,IAChBA,EAAAA,EAAAA,UAAAA,GAAIV,KAAKqC,GAClBtB,EAAKI,SAASmB,UAAUC,IAAI,WAC5BtB,SAASuB,iBAAiB,UAAWC,GAEvC,SAASJ,EAAgBK,GACjBf,MAAAA,EAASgB,EAAsBD,GACrC3B,EAAKK,KAAKU,UAAYH,EAExB,SAASgB,GAAsB,YAC7BrB,EAD6B,MAE7BC,EAF6B,KAG7BC,EAH6B,WAI7BoB,EAJ6B,aAK7BnB,EAL6B,WAM7BoB,EAN6B,SAO7BC,IAGQ,4EACqBxB,WAAqBC,GAASC,4BAEnDD,GAASC,8BACEoB,8BACCnB,GAAgB,0CAClBoB,iBACXC,gCAKT,SAASL,EAAMT,GACC,WAAVA,EAAEe,MACNhC,EAAKI,SAASmB,UAAUU,OAAO,WAC/B/B,SAASgC,oBAAoB,UAAWR,IAxD1C1B,EAAKC,OAAOwB,iBAAiB,QAAST,IACtC,EAAc/B,EAAAA,eAAAA,KAAK0B;;ACYnB,aApBA,QAAA,oBAoBA,QAAA","file":"src.88c37235.js","sourceRoot":"../src","sourcesContent":["const KEY = 'fadfbb72581e18342bb7490adda20bdd';\nconst BASE_URL = 'https://api.themoviedb.org/3';\nconst SEARCH_MOVIES = `${BASE_URL}/search/movie`;\nconst MOVIE = `${BASE_URL}/movie`;\nconst TRENDING = `${BASE_URL}/trending`;\nconst COMMON = `api_key=${KEY}&language=en-US`;\n\nfunction fetchUrl(url) {\n  return fetch(url).then(r => {\n    if (r.ok) return r.json();\n    return Promise.reject(r);\n  });\n}\nfunction getMovies(query) {\n  const searchQuery = `?query=${query}`;\n  const url = `${SEARCH_MOVIES}${searchQuery}&${COMMON}`;\n  return fetchUrl(url).then(r => r.results);\n}\nfunction getMovie(id) {\n  const url = `${MOVIE}/${id}?${COMMON}`;\n  return fetchUrl(url);\n}\nfunction getCast(id) {\n  const url = `${MOVIE}/${id}/credits?${COMMON}`;\n  return fetchUrl(url).then(r => r.cast);\n}\nfunction getReviews(id) {\n  const url = `${MOVIE}/${id}/reviews?${COMMON}`;\n  return fetchUrl(url).then(r => r.results);\n}\nfunction getTrending() {\n  const url = `${TRENDING}/all/day?${COMMON}`;\n  return fetchUrl(url).then(r => r.results);\n}\nexport { fetchUrl, getMovies, getMovie, getCast, getReviews, getTrending };\n","import { getTrending, getMovie } from './services/moviesAPI';\n\nconst refs = {\n  movies: document.querySelector('.movies'),\n  backdrop: document.querySelector('.backdrop'),\n  card: document.querySelector('.movie-card'),\n};\nrefs.movies.addEventListener('click', onMovieClick);\ngetTrending().then(renderMovies);\n\nfunction createMarkup({ id, poster_path, title, name, vote_average }) {\n  const BASE_IMG_URL = 'https://www.themoviedb.org/t/p/w300_and_h450_bestv2';\n  return `\n    <li class=\"movies__item\" data-id=${id}>\n    <img class=\"movies__img\" src='${BASE_IMG_URL}${poster_path}' alt=\"${title || name}\"/>\n    <div>\n    <h2>${title || name}</h2>\n    <p>User rating: ${vote_average || 'no voting yet'}</p>\n    </div>\n    </li>\n    `;\n}\nfunction renderMovies(movies) {\n  const markup = movies.map(createMarkup).join('');\n  refs.movies.innerHTML = markup;\n}\n\nfunction onMovieClick(e) {\n  const liRef = e.target.closest('li');\n  const id = liRef.dataset.id;\n  getMovie(id).then(renderMovieCard);\n  refs.backdrop.classList.add('is-open');\n  document.addEventListener('keydown', onEsc);\n}\nfunction renderMovieCard(movie) {\n  const markup = createMovieCardMarkup(movie);\n  refs.card.innerHTML = markup;\n}\nfunction createMovieCardMarkup({\n  poster_path,\n  title,\n  name,\n  popularity,\n  vote_average,\n  vote_count,\n  overview,\n}) {\n  const BASE_IMG_URL = 'https://www.themoviedb.org/t/p/w600_and_h900_bestv2';\n  return `\n    <img src='${BASE_IMG_URL}${poster_path}' alt=\"${title || name}\"/>\n    <div>\n    <h2>${title || name}</h2>\n    <p>Popularity: ${popularity}</p>\n    <p>User rating: ${vote_average || 'no voting yet'}</p>\n    <p>Vote count:${vote_count}</p>\n    <p>${overview}</p>\n    </div>\n    \n    `;\n}\nfunction onEsc(e) {\n  if (e.key !== 'Escape') return;\n  refs.backdrop.classList.remove('is-open');\n  document.removeEventListener('keydown', onEsc);\n}\n","import './sass/main.scss';\n// import './js/practice1';\n// game\n// import './js/practice2';\n// game\n// import './js/practice3';\n// import './js/practice4';\n// import './js/practice5';\n// import './js/practice6';\n// import './js/practice7';\n// import './js/practice8';\n// import './js/lection8-add';\n// import './js/practice8-add';\n// import './js/practice9';\n// import './js/practice10';\n// import './js/practice11';\n// import './js/app';\n// import './js/practice17-timer';\n// import './js/practice17';\n// import './js/practice18';\nimport './js/movies';\n"]}